<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Smart Budget & Tax Planner - Free Online Tool</title>
    <meta name="description" content="Free US Budget Planner with built-in Tax Estimator. Track W-2 paychecks, 1099 gig income, and daily expenses safely.">
    
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --us-navy: #0A2540;
            --us-blue: #635BFF;
            --us-green: #22C55E;
            --us-bg: #F8FAFC;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; padding-bottom: 100px; color: var(--us-navy); background-color: var(--us-bg);
        }

        .header { background: var(--us-navy); padding: 20px; text-align: center; color: white; font-weight: 700; position: sticky; top: 0; z-index: 100; }

        /* Summary Card */
        .stats-card {
            margin: 15px; padding: 20px; background: white; border-radius: 16px;
            display: flex; justify-content: space-around; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .stats-label { font-size: 10px; color: #64748b; text-transform: uppercase; font-weight: 600; }
        .stats-value { font-size: 20px; font-weight: 700; display: block; }

        /* Tabs */
        .tab-bar { display: flex; gap: 5px; padding: 0 15px; margin-bottom: 15px; overflow-x: auto; }
        .tab-btn {
            flex: 1; padding: 10px 5px; border-radius: 8px; border: none;
            background: #E2E8F0; color: #475569; font-weight: 600; cursor: pointer; white-space: nowrap; font-size: 13px;
        }
        .tab-btn.active { background: var(--us-blue); color: white; }

        /* List Items */
        .record-list { background: white; margin: 0 15px; border-radius: 12px; }
        .record-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #F1F5F9; }

        /* Calculator Styles */
        .tax-card { background: white; margin: 15px; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .input-box { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #E2E8F0; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .result-line { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #E2E8F0; }

        /* Modal & FAB */
        .add-btn {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            width: 60px; height: 60px; background: var(--us-blue);
            border-radius: 50%; font-size: 30px; color: white;
            display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(99,91,255,0.4); z-index: 1000;
        }

        .modal {
            position: fixed; bottom: 0; left: 0; right: 0; background: white;
            border-radius: 20px 20px 0 0; padding: 20px; transform: translateY(100%);
            transition: 0.3s ease-out; z-index: 2000; max-height: 90vh; overflow-y: auto;
        }
        .modal.show { transform: translateY(0); }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display: none; z-index: 1500; }
        .overlay.show { display: block; }
        
        .cat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0; }
        .cat-item { text-align: center; font-size: 10px; opacity: 0.5; cursor: pointer; }
        .cat-item.active { opacity: 1; font-weight: 700; }
        .cat-icon { font-size: 24px; background: #F1F5F9; padding: 10px; border-radius: 12px; display: block; margin-bottom: 5px; }
        .cat-item.active .cat-icon { background: #EEF2FF; border: 2px solid var(--us-blue); }
    </style>
</head>
<body>

<div id="app">
    <div class="header">üè¶ Budget & Tax Pro</div>

    <div class="stats-card">
        <div style="text-align:center">
            <span class="stats-label">Net Income</span>
            <span class="stats-value" style="color:var(--us-green)">+${{ totalInc.toLocaleString() }}</span>
        </div>
        <div style="text-align:center">
            <span class="stats-label">Expenses</span>
            <span class="stats-value" style="color:#EF4444">-${{ totalExp.toLocaleString() }}</span>
        </div>
    </div>

    <div class="tab-bar">
        <button class="tab-btn" :class="{active: view === 'list'}" @click="view = 'list'">Transactions</button>
        <button class="tab-btn" :class="{active: view === 'tax'}" @click="view = 'tax'">üìä Tax Estimator</button>
        <button class="tab-btn" @click="exportCSV">üì§ Export</button>
    </div>

    <div v-if="view === 'list'" class="record-list">
        <div v-if="records.length === 0" style="padding:40px; text-align:center; color:#94A3B8;">Start by adding your first paycheck or expense!</div>
        <div v-for="(item, i) in records" :key="i" class="record-item">
            <div style="display:flex; align-items:center; gap:12px">
                <span style="font-size:20px">{{ item.catIcon }}</span>
                <div>
                    <div style="font-weight:600; font-size:14px">{{ item.category }}</div>
                    <div style="font-size:11px; color:#94A3B8">{{ formatDate(item.date) }} <span v-if="item.note">| {{ item.note }}</span></div>
                </div>
            </div>
            <div :style="{color: item.type === 'income' ? var(--us-green) : '#1E293B', fontWeight:'700'}">
                {{ item.type === 'income' ? '+' : '-' }}${{ item.amount.toFixed(2) }}
            </div>
        </div>
    </div>

    <div v-if="view === 'tax'" class="tax-card">
        <h3 style="margin-top:0">Federal Tax Estimator</h3>
        <p style="font-size:12px; color:#64748B">Estimate your annual tax liability based on 2025/26 tax brackets.</p>
        
        <label class="stats-label">Annual Gross Income ($)</label>
        <input type="number" class="input-box" v-model.number="taxCalc.income" placeholder="e.g. 65000">
        
        <label class="stats-label">Filing Status</label>
        <select class="input-box" v-model="taxCalc.status">
            <option value="single">Single</option>
            <option value="married">Married (Jointly)</option>
        </select>

        <div style="margin-top:20px; background:#F8FAFC; padding:15px; border-radius:10px;">
            <div class="result-line"><span>Estimated Tax:</span> <span style="font-weight:700">${{ calculateTax().tax.toLocaleString() }}</span></div>
            <div class="result-line"><span>Effective Rate:</span> <span>{{ calculateTax().rate }}%</span></div>
            <div class="result-line"><span>After-tax Income:</span> <span>${{ (taxCalc.income - calculateTax().tax).toLocaleString() }}</span></div>
        </div>
        <p style="font-size:10px; color:#94A3B8; margin-top:10px;">* This is a rough estimate for educational purposes only. Consult a tax professional (CPA) for actual filings.</p>
    </div>

    <div class="add-btn" @click="showModal = true">+</div>

    <div :class="['overlay', showModal ? 'show' : '']" @click="showModal = false"></div>
    <div :class="['modal', showModal ? 'show' : '']">
        <div style="display:flex; justify-content:space-between; margin-bottom:15px">
            <b style="font-size:18px">Log Entry</b>
            <span @click="showModal = false" style="color:var(--us-blue); cursor:pointer">Cancel</span>
        </div>

        <div style="display:flex; background:#F1F5F9; border-radius:10px; padding:4px; margin-bottom:15px">
            <div @click="newRecord.type = 'expense'" :style="newRecord.type === 'expense' ? 'background:white; flex:1; text-align:center; padding:10px; border-radius:8px; font-weight:700;' : 'flex:1; text-align:center; padding:10px; color:#64748B'">Expense</div>
            <div @click="newRecord.type = 'income'" :style="newRecord.type === 'income' ? 'background:var(--us-green); color:white; flex:1; text-align:center; padding:10px; border-radius:8px; font-weight:700;' : 'flex:1; text-align:center; padding:10px; color:#64748B'">Income</div>
        </div>

        <div class="cat-grid">
            <div v-for="c in categories[newRecord.type]" :key="c.name" class="cat-item" :class="{active: newRecord.category === c.name}" @click="newRecord.category = c.name; newRecord.catIcon = c.icon">
                <span class="cat-icon">{{ c.icon }}</span> {{ c.name }}
            </div>
        </div>

        <div style="background:#F1F5F9; padding:15px; border-radius:12px">
            <div style="display:flex; align-items:center; border-bottom:1px solid #CBD5E1; padding-bottom:5px">
                <span style="font-size:24px; color:#64748B; margin-right:5px">$</span>
                <input type="number" v-model.number="newRecord.amount" placeholder="0.00" style="border:none; background:transparent; font-size:30px; font-weight:700; width:100%; outline:none">
            </div>
            <input type="text" v-model="newRecord.note" placeholder="Memo (e.g. Safeway, Uber, Tips)" style="width:100%; border:none; background:transparent; margin-top:10px; outline:none">
        </div>

        <button @click="save" style="width:100%; background:var(--us-blue); color:white; border:none; padding:18px; border-radius:12px; margin-top:15px; font-size:16px; font-weight:700">Add to Ledger</button>
    </div>
</div>

<script>
new Vue({
    el: '#app',
    data: {
        view: 'list',
        showModal: false,
        taxCalc: { income: '', status: 'single' },
        records: JSON.parse(localStorage.getItem('us_pro_budget') || '[]'),
        categories: {
            expense: [
                {name:'Rent/Mortgage',icon:'üè†'},{name:'Groceries',icon:'üõí'},{name:'Dining/Tips',icon:'üçî'},{name:'Gas/Fuel',icon:'‚õΩ'},
                {name:'Car Payment',icon:'üöó'},{name:'Utilities',icon:'‚ö°'},{name:'Insurance',icon:'üõ°Ô∏è'},{name:'Streaming',icon:'üì∫'},
                {name:'Shopping',icon:'üõçÔ∏è'},{name:'Student Loan',icon:'üéì'},{name:'Medical',icon:'üè•'},{name:'Others',icon:'‚ûï'}
            ],
            income: [
                {name:'Paycheck (W-2)',icon:'üè¶'}, {name:'Gig/1099',icon:'üé∏'}, {name:'Cash Tips',icon:'üíµ'}, {name:'Investment',icon:'üìà'}, {name:'Tax Refund',icon:'üí∞'}
            ]
        },
        newRecord: { type:'expense', category:'Dining/Tips', catIcon:'üçî', amount: '', note: '' }
    },
    computed: {
        totalExp() { return this.records.filter(r=>r.type==='expense').reduce((s,r)=>s+Number(r.amount),0) },
        totalInc() { return this.records.filter(r=>r.type==='income').reduce((s,r)=>s+Number(r.amount),0) }
    },
    methods: {
        save() {
            if(!this.newRecord.amount || this.newRecord.amount <= 0) return;
            this.records.unshift({...this.newRecord, date: new Date().getTime()});
            localStorage.setItem('us_pro_budget', JSON.stringify(this.records));
            this.showModal = false;
            this.newRecord.amount = ''; this.newRecord.note = '';
        },
        formatDate(ts) { return new Date(ts).toLocaleDateString('en-US', {month:'short', day:'numeric'}); },
        calculateTax() {
            const inc = this.taxCalc.income || 0;
            // Simplified 2025 Standard Deduction
            const deduction = this.taxCalc.status === 'single' ? 15000 : 30000;
            const taxable = Math.max(0, inc - deduction);
            let tax = 0;
            
            // Basic Progressive Tax Brackets (Rough Estimate)
            if(taxable > 0) {
                if(taxable <= 11600) tax = taxable * 0.10;
                else if(taxable <= 47150) tax = 1160 + (taxable-11600)*0.12;
                else if(taxable <= 100525) tax = 5426 + (taxable-47150)*0.22;
                else tax = 17168 + (taxable-100525)*0.24;
            }
            return { tax: Math.round(tax), rate: inc > 0 ? ((tax/inc)*100).toFixed(1) : 0 };
        },
        exportCSV() {
            let csv = "Date,Type,Category,Amount,Note\n";
            this.records.forEach(r => csv += `${this.formatDate(r.date)},${r.type},${r.category},${r.amount},${r.note}\n`);
            const blob = new Blob([csv], { type: 'text/csv' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'US_Tax_Budget_Data.csv';
            a.click();
        }
    }
});
</script>
</body>
</html>
